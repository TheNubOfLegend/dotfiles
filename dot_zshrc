PATH=$PATH:~/.local/bin
SUDO_EDITOR=/usr/bin/nvim
EDITOR=/usr/bin/nvim
JAVA_HOME=/usr/bin/java

eval `ssh-agent` 2>&1 >/dev/null
ssh-add -L 2>&1 >/dev/null || {
  ssh-add -q ~/.ssh/cjefferson2
  ssh-add -q ~/.ssh/thenuboflegend
  ssh-add -q ~/.ssh/cjeph09
}

# Lines configured by zsh-newuser-install
HISTFILE=~/.histfile
HISTSIZE=1000
SAVEHIST=1000

setopt autocd
setopt SHARE_HISTORY             # Share history between all sessions.
setopt HIST_EXPIRE_DUPS_FIRST    # Expire a duplicate event first when trimming history.
setopt HIST_IGNORE_DUPS          # Do not record an event that was just recorded again.
setopt HIST_IGNORE_ALL_DUPS      # Delete an old recorded event if a new event is a duplicate.
setopt HIST_FIND_NO_DUPS         # Do not display a previously found event.
setopt HIST_IGNORE_SPACE         # Do not record an event starting with a space.
setopt HIST_SAVE_NO_DUPS         # Do not write a duplicate event to the history file.
setopt APPEND_HISTORY            # append to history file
setopt HIST_NO_STORE             # Don't store history commands
unsetopt beep notify
bindkey -v
# theoretically faster response time
export keytimeout=1
#use nvim as manpager
export MANPAGER='nvim +Man!'

alias lg=lazygit

alias test='echo "Using /usr/bin/test, not test file"; test'

function lswitch() {
    if [ -t 1 ]; then
        eza --group-directories-first "$@"
    else
        command ls "$@"
    fi
}

if command -v eza 2>&1 >/dev/null; then 
  alias ls=lswitch
else
  echo "Missing eza"
fi

# if command -v bat 2>&1 >/dev/null; then
#   alias cat=bat
# else
#   echo "Missing bat"
# fi

if command -v nvim 2>&1 >/dev/null; then
  alias v=nvim
else
  echo "Missing nvim"
fi

alias pacview="pacman -Qq | fzf --preview 'pacman -Qil {}' --layout=reverse --bind 'enter:execute(pacman -Qil {} | less)'"
# End of lines configured by zsh-newuser-install
# The following lines were added by compinstall
zstyle :compinstall filename '/home/nub/.zshrc'

autoload -Uz compinit
compinit

zstyle ':completion:*' matcher-list 'm:{a-z}={A-Za-z}'
zstyle ':completion:*' menu no
zstyle ':fzf-tab:complete:cd:*' fzf-preview 'ls --color $realpath'
zstyle ':fzf-tab:complete:__zoxide_z:*' fzf-preview 'ls --color $realpath'

# where do you want to store your plugins?
ZPLUGINDIR=${ZPLUGINDIR:-${ZDOTDIR:-$HOME/.config/zsh}/plugins}

# get zsh_unplugged and store it with your other plugins
if [[ ! -d $ZPLUGINDIR/zsh_unplugged ]]; then
  git clone --quiet https://github.com/mattmc3/zsh_unplugged $ZPLUGINDIR/zsh_unplugged
fi
source $ZPLUGINDIR/zsh_unplugged/zsh_unplugged.zsh

# make list of the Zsh plugins you use
repos=(
  # plugins that you want loaded first
  Aloxaf/fzf-tab

  # other plugins
  zsh-users/zsh-completions
  jeffreytse/zsh-vi-mode
  # ...

  # plugins you want loaded last
  zdharma-continuum/fast-syntax-highlighting
#  zsh-users/zsh-history-substring-search
  zsh-users/zsh-autosuggestions
)

# now load your plugins
plugin-load $repos
# # End of lines added by compinstall

if command -v oh-my-posh 2>&1 >/dev/null; then
  eval "$(oh-my-posh init zsh --config $HOME/.config/ohmyposh/nub.toml)"
else
  echo "Missing omp"
fi

#zoxide setup
if command -v zoxide 2>&1 >/dev/null; then
  eval "$(zoxide init --cmd cd zsh)"
else
  echo "Missing zoxide"
fi
if command -v fzf 2>&1 >/dev/null; then
  eval "$(fzf --zsh)"
else
  echo "Missing fzf"
fi

export PATH="/home/nub/.local/share/gem/ruby/3.4.0/bin:$PATH"

eval $(thefuck --alias)
